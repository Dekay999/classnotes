\documentclass[12pt,fleqn]{article}\usepackage{../../common}
\begin{document}
Direkli Araba, Ters Sarkaç (Cart Pole, Inverted Pendulum)

Sadece saða ve sola giden bir araba üzerinde duran bir direk var. Bu
direðin üzerinde bir kütle var; acaba bu direði sadece arabayý saða sola
götürerek dengeleyebilir miyiz? Belki bazýlarýmýz elimiz üzerinde bir
sopayý dengelemeye uðraþmýþýzdýr, yapmaya çalýþacaðýmýz buna çok benziyor.  

\includegraphics[width=15em]{phy_cartpole_01.png}

Sistemin hareket denklemlerini modellemek için Lagrange formüllerini
kullanacaðýz. $L = K - P$ üzerinden,

$$
L = \frac{1}{2} M v_1^2 + \frac{1}{2} m v_2^2 - m g \ell \cos\theta
$$

$v_1$ arabanýn hýzý, $v_2$ ise þarkacýn hýzý. $x(t)$ arabanýn yerini
belirleyecek. Hýzlarý yer türeviyle deðiþtirebiliriz, mesela
$v_1^2 = \dot{x}^2$. Sarkacýn hýzý $v_2$'yi onun yeri üzerinden tanýmlamak
gerekiyor, þarkacýn yeri nedir? Onun yatay, dikey kordinatlarýna bakalým,
dikey $x-\ell\sin\theta$, dikey $\ell\cos\theta$. Genel
$v^2 = v_x^2 + v_y^2$ formülü üzerinden,

$$
v_2^2 = 
\left( \frac{\ud}{\ud t} (x - \ell\sin\theta) \right)^2 + 
\left( \frac{\ud}{\ud t} (x - \ell\cos\theta) \right)^2 
$$

$v_2$'yi basitleþtirince, 

$$
v_2^2 = \dot{x}^2 - 2 \ell \dot{x}\dot{\theta}\cos\theta + \ell^2 \dot{\theta}^2
$$

Lagrangian þu hale geliyor,

$$
L = 
\frac{1}{2} (M + m) \dot{x}^2 - 
m \ell \dot{x}\dot{\theta} \cos\theta +
\frac{1}{2} m \ell^2 \dot{\theta}^2 - 
m g \ell \cos\theta
$$

Þimdi Euler-Lagrange denklemlerini yazalým,

$$
\frac{\ud}{\ud t} \frac{\partial L}{\partial \dot{x}} -
\frac{\partial L}{\partial x}  = F
$$

$$
\frac{\ud}{\ud t} \frac{\partial L}{\partial \dot{\theta}} -
\frac{\partial L}{\partial \theta}  = 0
$$

Ýki üstteki denklemde eþitliðin sað tarafýnda $F$ var, niye sýfýr deðil?
Hamilton ve Lagrange-d'Alembert prensibine göre dýþ kuvvetler bir sisteme
eþitliðin sað tarafýndan dahil edilebilir. Ayrýca hiza doðru oranda ters
yönde etki eden bir sürtünme kuvveti $\mu\dot{x}$ de ekleriz. $L$'yi
üstteki denklemlere sokarsak ve basitleþtirirsek ters sarkacýn hareket
denklemlerini elde ediyoruz.

$$
(M+m) \ddot{x} + 
m \ell \ddot{\theta} \cos\theta - 
m \ell \dot{\theta}^2 \sin\theta + \mu\dot{x} = F
$$

$$
\ell \ddot{\theta} - g \sin\theta + \ddot{x} \cos\theta = 0
$$


{\em Gayri-Lineer Dinamik ve Kaos, Ders 6}'da Jacobian matrisi ile denge
noktalarý yakýnýnda bir sistemi nasýl lineerize edebileceðimizi gördük. Ýki
boyutta $x^*,y^*$ denge noktasý yakýnýnda, $\dot{u} = \dot{x} = f(x,y)$ ve
$\dot{v} = \dot{y} = g(x,y)$ ODE sistem için mesela, ya da,

$$
\left[\begin{array}{r}
\dot{u} \\ \dot{v}
\end{array}\right] = 
\left[\begin{array}{r}
f(x,y) \\ g(x,y)
\end{array}\right] 
$$

için, lineerizasyon sonrasý þöyle bir görüntü var,

$$
\left[\begin{array}{r}
\dot{u} \\ \dot{v}
\end{array}\right]
=
\left[\begin{array}{rr}
\frac{\partial f}{\partial x} & \frac{\partial f}{\partial y} \\
\frac{\partial g}{\partial x} & \frac{\partial g}{\partial y} 
\end{array}\right]_{x^*,y^*}
\left[\begin{array}{r} u \\ v \end{array}\right]
+ ...
$$

Noktalý kýsýmlarý atarsak 1. dereceden bir yaklaþýksallama ve lineerizasyon
elde ediyoruz ve görülen $x^*,y^*$ noktasýndaki deðerleri kullanýlan 2x2
matrisi Jacobian matrisidir. 

\begin{minted}[fontsize=\footnotesize]{python}
from sympy import *

init_printing(use_unicode=False)

x1, x2, x3, x4 = symbols('x1 x2 x3 x4')
M, m, l, mu, g, u = symbols('m M l mu g u',constant = True)

a = Matrix([[M+m, m*l*cos(x2)],[cos(x2), l]])
#pprint (a)

b = Matrix([m * l * x4**2 * sin(x2) - mu*x3 + u , g * sin(x2)])
#pprint (b)

c = a.inv() * b
#pprint (c)

tmp = diff(c[0], x2).subs({x1:0,x2:0,x3:0,x4:0}).simplify()
print(latex(tmp), ',')
tmp = diff(c[0], x3).subs({x1:0,x2:0,x3:0,x4:0}).simplify()
print(latex(tmp), ',')
tmp = diff(c[1], x2).subs({x1:0,x2:0,x3:0,x4:0}).simplify()
print(latex(tmp), ',')
tmp = diff(c[1], x3).subs({x1:0,x2:0,x3:0,x4:0}).simplify()
\end{minted}

\begin{verbatim}
- \frac{M g}{m} ,
- \frac{\mu}{m} ,
\frac{g \left(M + m\right)}{l m} ,
\end{verbatim}

$$
- \frac{M g}{m} ,
- \frac{\mu}{m} ,
\frac{g \left(M + m\right)}{l m} ,
$$




2.160 pdf sf 75 algebr ricc

[devam edecek]

Kaynaklar

[1] Wikipedia, {\em Inverted Pendulum}, \url{wikipedia.com/Inverted_pendulum}

[2] Wikipedia, {\em Optimal control}, \url{wikipedia.com/Optimal_control}

\end{document}
